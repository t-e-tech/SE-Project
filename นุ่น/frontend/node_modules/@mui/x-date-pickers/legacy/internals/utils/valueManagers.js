import { areDatesEqual, replaceInvalidDateByNull } from './date-utils';
import { addPositionPropertiesToSections, createDateStrForInputFromSections } from '../hooks/useField/useField.utils';
export var singleItemValueManager = {
  emptyValue: null,
  getTodayValue: function getTodayValue(utils) {
    return utils.date();
  },
  cleanValue: replaceInvalidDateByNull,
  areValuesEqual: areDatesEqual,
  isSameError: function isSameError(a, b) {
    return a === b;
  },
  defaultErrorState: null
};
export var singleItemFieldValueManager = {
  updateReferenceValue: function updateReferenceValue(utils, value, prevReferenceValue) {
    return value == null || !utils.isValid(value) ? prevReferenceValue : value;
  },
  getSectionsFromValue: function getSectionsFromValue(utils, date, prevSections, isRTL, getSectionsFromDate) {
    var shouldReUsePrevDateSections = !utils.isValid(date) && !!prevSections;
    if (shouldReUsePrevDateSections) {
      return prevSections;
    }
    return addPositionPropertiesToSections(getSectionsFromDate(date), isRTL);
  },
  getValueStrFromSections: createDateStrForInputFromSections,
  getActiveDateManager: function getActiveDateManager(utils, state) {
    return {
      date: state.value,
      referenceDate: state.referenceValue,
      getSections: function getSections(sections) {
        return sections;
      },
      getNewValuesFromNewActiveDate: function getNewValuesFromNewActiveDate(newActiveDate) {
        return {
          value: newActiveDate,
          referenceValue: newActiveDate == null || !utils.isValid(newActiveDate) ? state.referenceValue : newActiveDate
        };
      }
    };
  },
  parseValueStr: function parseValueStr(valueStr, referenceValue, parseDate) {
    return parseDate(valueStr.trim(), referenceValue);
  },
  hasError: function hasError(error) {
    return error != null;
  }
};